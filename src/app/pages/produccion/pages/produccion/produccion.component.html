<div id="initial" class="dark:bg-gray-900">
    <div class="py-1 px-2 w-full">
        <!-- <h1 class="dark:text-gray-200">Buscar Metrics</h1> -->
        <search-metrics [typeSearch]="type" (onSelectOrder)="onSelectOrder($event)"></search-metrics>
    </div>
    <!-- @if(currentOrder() !=null) {
    @if(!cargandoDetalle() && currentDetail().length == 0  ) 
    {
    <div
        class="w-full h-fit overflow-auto border-2 border-spacing-2 border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 p-2">
        <p class="text-center text-gray-500 dark:text-gray-400">No se encontraron resultados</p>
    </div>
    }    
    } -->
    <div class="px-1">
        <div class="px-1">
            <div class="flex flex-row justify-between mb-2">
                <div class="w-2/5">
                    <ejs-grid #grid [dataSource]='ordenesMetrics()' [textWrapSettings]='wrapSettings'   
                    (rowSelected)='onRowSelected($event)'             
                    [filterSettings]="filterSettings " [allowTextWrap]='true'
                    [enableAdaptiveUI]='false' [enableHover]='true' rowHeight='30' (dataBound)='dataBound()'
                    [allowExcelExport]='true' [height]="heightGrid" allowReordering='true' [allowFiltering]=true
                    allowPaging="true " allowResizing="true" allowSorting="true" [pageSettings]='pageSettings'>
                    <e-columns>
                        <e-column field='NoOrden' [allowFiltering]="true" headerText='Orden' width=100>
                        </e-column>
                        <e-column field='NombreCliente' [allowFiltering]="true" headerText='Cliente' width=150>
                        </e-column>
                        <e-column field='Vendedor' [allowFiltering]="true" width=150>
                        </e-column>
                        <e-column field='CantidadEntregar' [allowFiltering]="true" headerText='Cant' width=100>
                            <ng-template #template let-data>
                                <div class="flex flex-col">
                                    <span>{{data.CantidadEntregar | number}}</span>
                                </div>
                            </ng-template>
                        </e-column>                    
                    </e-columns>                
                </ejs-grid>
                </div>            
                <div class="w-3/5 " >
                    <detalle-produccion 
                    [orden]="currentOrder()"
                    [detalles]="currentDetail()" [selectedId]="selectedMuestra()?.id_produccion || null" (selectMuestra)="onSelectMuestra($event)" (cerrarMuestra)="cerrarMuestra($event)" (voBoChange)="onChangeVoBo($event.id, $event.event)" />
                </div>            
            </div>
          
        </div>
    </div>

</div>
<!-- Usa el nuevo componente de diÃ¡logo -->
@if(selectedMuestra()){
<registro-muestra [muestra]="selectedMuestra()" (onClose)="onCloseDialog()"
    (onSave)="onSaveMuestra($event)"></registro-muestra>
}