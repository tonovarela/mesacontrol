<p-dialog [modal]="true" [visible]="true" [style]="{ width: '60rem' }"
        [breakpoints]="{ '1199px': '75vw', '575px': '95vw' }">
    <ng-template #headless>
      <div class="flex flex-row justify-end p-3 w-full">
        <!-- <button  (click)="registrarOmisiones()" type="button"  class="flex items-center  px-2 py-1 bg-blue-400 hover:bg-blue-600 text-white rounded-md transition-colors duration-200 " >                   
          Registrar omisiones en producción
        </button> -->
        <button (click)="cerrar()" type="button"  class="flex items-center  px-1 py-1 bg-gray-400 hover:bg-gray-600 text-white rounded-full transition-colors duration-200 " >
         <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12">                  
                </path>
          </svg>          
        </button>
      </div>
      <div class="p-4">
        <!-- Sección de Omisiones de Métricas -->
        <div class="mb-6">
          <h2 class="text-lg font-semibold text-gray-800 mb-3">
            Omisiones ({{ detalleOmisiones().omisiones.length }})
          </h2>
          @if (detalleOmisiones().omisiones.length > 0) {
            <div class="overflow-x-auto border rounded-lg max-h-64 overflow-y-auto">
              <table class="min-w-full divide-y divide-gray-200">
                <thead class="bg-gray-50 sticky top-0">
                  <tr>
                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Proceso</th>
                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Componente</th>
                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Pliego</th>
                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Entrada</th>
                  </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-200">
                  @for (omision of detalleOmisiones().omisiones; track omision.orden + omision.proceso + omision.componente+ omision.pliego + omision.entrada) {
                    <tr class="hover:bg-gray-50">
                      <td class="px-4 py-2 text-sm text-gray-900">{{ omision.proceso }}</td>
                      <td class="px-4 py-2 text-sm text-gray-900">{{ omision.componente }}</td>
                      <td class="px-4 py-2 text-sm text-gray-900">{{ omision.pliego }}</td>
                      <td class="px-4 py-2 text-sm text-gray-900">{{ omision.entrada }}</td>
                    </tr>
                  }
                </tbody>
              </table>
            </div>
          } @else {
            <div class="text-center py-6 bg-gray-50 rounded-lg">
              <p class="text-gray-500">No hay omisiones de métricas</p>
            </div>
          }
        </div>

        <!-- Sección de Mesa Control -->
        <div>
          <h2 class="text-lg font-semibold text-gray-800 mb-3">
            Mesa Control ({{ detalleOmisiones().mc.length }})
          </h2>
          @if (detalleOmisiones().mc.length > 0) {
            <div class="overflow-x-auto border rounded-lg max-h-64 overflow-y-auto">
              <table class="min-w-full divide-y divide-gray-200">
                <thead class="bg-blue-50 sticky top-0">
                  <tr>
                    <th class="px-4 py-2 text-left text-xs font-medium text-blue-600 uppercase tracking-wider">Proceso</th>
                    <th class="px-4 py-2 text-left text-xs font-medium text-blue-600 uppercase tracking-wider">Componente</th>
                    <th class="px-4 py-2 text-left text-xs font-medium text-blue-600 uppercase tracking-wider">Pliego</th>
                    <th class="px-4 py-2 text-left text-xs font-medium text-blue-600 uppercase tracking-wider">Entrada</th>
                  </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-200">
                  @for (mc of detalleOmisiones().mc; track mc.orden + mc.proceso + mc.componente + mc.pliego + mc.entrada) {
                    <tr class="hover:bg-blue-50">
                      <td class="px-4 py-2 text-sm text-gray-900">{{ mc.proceso }}</td>
                      <td class="px-4 py-2 text-sm text-gray-900">{{ mc.componente }}</td>
                      <td class="px-4 py-2 text-sm text-gray-900">{{ mc.pliego }}</td>
                      <td class="px-4 py-2 text-sm text-gray-900">{{ mc.entrada }}</td>
                    </tr>
                  }
                </tbody>
              </table>
            </div>
          } @else {
            <div class="text-center py-6 bg-blue-50 rounded-lg">
              <p class="text-blue-500">No hay registros en Mesa Control</p>
            </div>
          }
        </div>
      </div>
      
    </ng-template>
</p-dialog>
